<?php
include '../db.class.php';
session_start();
?>
<?php
$db = new DB();
$db->conn();

if (!empty($_POST)) {

  $usuario = $db->login("usuario", $_POST);
  //var_dump($usuario);
  //exit;
  if ($usuario !== "Error") {

    $_SESSION['usuario'] = $usuario;

    header("location: ./Carros/CarroList.php");

  } else {
    echo "<br/><br/><p class='text-center' style='color:red'>Login ou senha incorretos, por favor tente novamente!</p>";
  }

}

?>
<?php
include "../imports.php";
?>
<nav class="navbar navbar-dark bg-dark">
  <a class="navbar-brand" href="#">
    <svg width="76" height="76" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd"
        d="M17.828 44.108v7.695H16.16v-5.408l-2.231 3.869-2.242-3.87v5.409h-1.658v-7.695h2.148l1.752 3.132 1.71-3.132h2.19zM19.237 51.803h1.658v-7.695h-1.658v7.695zM23.616 45.712h-2.002v-1.604h5.672v1.604h-2.001v6.09h-1.669v-6.09zM27.902 51.705v-1.604c.344.066 1.179.217 2.2.217.856 0 1.283-.12 1.283-.607 0-.564-.365-.64-1.564-1.214-1.168-.552-2.033-1.04-2.033-2.34 0-1.605.938-2.157 2.794-2.157.95 0 1.637.087 2.065.14v1.604c-.417-.043-1.178-.151-2.023-.151-1.001 0-1.2.108-1.2.53 0 .434.543.651 1.356 1.03 1.22.575 2.221 1.052 2.221 2.515 0 1.528-.917 2.243-2.898 2.243-.782 0-1.512-.087-2.2-.206zM33.992 49.202v-5.094h1.658v5.029c0 .877.5 1.181 1.293 1.181.793 0 1.303-.304 1.303-1.181v-5.029h1.658v5.094c0 1.864-1.178 2.709-2.961 2.709s-2.95-.845-2.95-2.709zM44.43 50.35c.668 0 .939-.249.939-.92 0-.597-.25-.846-.866-.846H42.98v1.767h1.45zm-.114-3.132c.667 0 .907-.368.907-.877 0-.618-.292-.78-.907-.78H42.98v1.657h1.335zm-2.993-3.11h3.232c1.513 0 2.347.575 2.347 1.983 0 1.117-.616 1.463-1.179 1.691.668.206 1.367.586 1.367 1.875 0 1.344-.783 2.146-2.42 2.146h-3.347v-7.695zM48.091 51.803h1.658v-7.695h-1.658v7.695zM50.959 51.705v-1.604c.344.066 1.178.217 2.2.217.855 0 1.282-.12 1.282-.607 0-.564-.364-.64-1.563-1.214-1.168-.552-2.034-1.04-2.034-2.34 0-1.605.939-2.157 2.794-2.157.95 0 1.638.087 2.065.14v1.604c-.417-.043-1.178-.151-2.023-.151-1.001 0-1.2.108-1.2.53 0 .434.543.651 1.357 1.03 1.22.575 2.22 1.052 2.22 2.515 0 1.528-.917 2.243-2.898 2.243-.782 0-1.512-.087-2.2-.206zM62.887 44.108v7.695H61.23v-3.057H58.6v3.057h-1.657v-7.695H58.6v3.035h2.629v-3.035h1.657zM64.244 51.803h1.658v-7.695h-1.658v7.695zM25.603 54.464v7.694h-1.669v-5.407l-2.231 3.869-2.242-3.87v5.408h-1.658v-7.694h2.148l1.752 3.132 1.71-3.132h2.19zM31.401 58.311c0-1.572-.26-2.362-1.47-2.362s-1.47.79-1.47 2.362c0 1.583.26 2.384 1.47 2.384s1.47-.801 1.47-2.384zm-4.661 0c0-2.753 1.011-3.955 3.19-3.955 2.18 0 3.192 1.202 3.192 3.955s-1.012 3.956-3.191 3.956c-2.18 0-3.191-1.203-3.191-3.956zM35.395 56.068h-2.002v-1.604h5.673v1.604h-2.002v6.09h-1.669v-6.09zM43.998 58.311c0-1.572-.261-2.362-1.471-2.362s-1.47.79-1.47 2.362c0 1.583.26 2.384 1.47 2.384s1.47-.801 1.47-2.384zm-4.661 0c0-2.753 1.01-3.955 3.19-3.955 2.18 0 3.19 1.202 3.19 3.955s-1.01 3.956-3.19 3.956c-2.18 0-3.19-1.203-3.19-3.956zM49.764 57.91c.75 0 .98-.39.98-.975 0-.597-.23-.986-.98-.986h-1.24v1.96h1.24zm-2.899-3.446h3.003c1.585 0 2.597.617 2.597 2.47 0 1.193-.573 1.963-1.522 2.2l1.824 3.024h-1.94l-1.563-2.753h-.74v2.753h-1.659v-7.694zM53.456 62.06v-1.604a11.81 11.81 0 002.2.217c.855 0 1.283-.12 1.283-.607 0-.563-.365-.639-1.564-1.213-1.168-.553-2.034-1.041-2.034-2.342 0-1.603.94-2.156 2.795-2.156.95 0 1.637.087 2.065.14V56.1c-.418-.044-1.178-.152-2.023-.152-1.001 0-1.2.108-1.2.531 0 .433.543.65 1.356 1.03 1.22.574 2.221 1.051 2.221 2.514 0 1.528-.917 2.243-2.898 2.243-.782 0-1.512-.086-2.2-.206z"
        fill="#fff"></path>
      <path fill-rule="evenodd" clip-rule="evenodd"
        d="M30.794 12.767l7.092 12.766 7.092-12.767L37.886 0l-7.092 12.767zM52.069 25.533H37.885L44.977 38.3h14.184L52.07 25.533z"
        fill="#ED0000"></path>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M23.702 25.533h14.184L30.794 38.3H16.61l7.092-12.767z"
        fill="#ED0000"></path>
      <path fill-rule="evenodd" clip-rule="evenodd"
        d="M0 73.902h2.293c1.575 0 2.56-.94 2.56-2.979 0-2.106-.978-2.979-2.528-2.979H0v5.958zm1.018-.99v-3.978h1.324c.968 0 1.453.596 1.453 1.964 0 1.376-.5 2.014-1.485 2.014H1.018zm4.723.99H6.75v-3.08c.339-.1.75-.201 1.542-.201v-.915c-.8 0-1.268.219-1.615.37v-.286h-.936v4.112zm3.81-4.708l.711-.747-.71-.755-.703.755.703.747zm-.5 4.708h1.01V69.79H9.05v4.112zm3.35 0h.97c.46-.739 1.445-1.779 1.517-4.112H13.88c-.08 1.703-.646 2.627-.993 3.147-.347-.52-.912-1.444-.993-3.147h-1.01c.073 2.333 1.059 3.373 1.519 4.112zm5.24.084c.76 0 1.18-.076 1.422-.143v-.864a5.55 5.55 0 01-1.357.16c-.727 0-1.203-.227-1.244-.957h2.827c.008-.101.008-.286.008-.428 0-1.318-.412-2.048-1.833-2.048-1.372 0-2.01.713-2.01 2.123 0 1.443.783 2.157 2.188 2.157zm-1.178-2.484c.04-.638.266-.99.968-.99.824 0 .88.403.889.99h-1.858zM22.832 76l1.68-2.417c.193-.277 1.324-1.745 1.324-3.793h-1.01c0 1.62-.775 2.811-1.017 3.172-.282-.42-1.074-1.578-1.074-3.172h-1.01c.065 2.165 1.01 3.247 1.494 3.986l-1.114 1.636.727.588zm5.628-2.014c1.364 0 2.09-.747 2.09-2.14 0-1.418-.726-2.14-2.09-2.14-1.357 0-2.092.722-2.092 2.14 0 1.393.735 2.14 2.091 2.14zm0-.915c-.784 0-1.05-.428-1.05-1.233 0-.831.266-1.234 1.05-1.234.783 0 1.057.403 1.057 1.234 0 .805-.274 1.233-1.058 1.233zm6.75-3.28H34.2v3.079c-.339.1-.75.201-1.155.201-.339 0-.67-.15-.67-.68v-2.6h-1.009v2.65c0 1.092.613 1.545 1.292 1.545.799 0 1.268-.218 1.615-.37v.286h.936V69.79zm1.098 4.111h1.009v-3.08c.339-.1.75-.201 1.542-.201v-.915c-.8 0-1.268.219-1.615.37v-.286h-.936v4.112zm7.944-5.816l-.08-.142h-1.478l-.065.134c-.589 1.233-1.59 2.686-1.59 5.11v.706h1.033v-.597c0-.335.016-.637.049-.923h2.705c.032.286.048.596.048.932v.596h1.033v-.655c0-2.425-1-3.986-1.655-5.16zm-1.986 3.366c.274-1.184.784-1.922 1.179-2.77.404.865.928 1.611 1.219 2.77h-2.398zm4.618 2.45h1.01v-3.071c.234-.118.782-.202 1.114-.202.371 0 .63.185.63.705v2.568h1.009v-2.72c0-.125-.009-.242-.033-.351.218-.127.784-.21 1.122-.202.364.009.639.185.639.705v2.568h1.001v-2.71c0-1.066-.598-1.486-1.349-1.486-.54 0-1.332.168-1.711.428-.226-.294-.614-.428-1.017-.428-.565 0-1.268.235-1.477.37v-.286h-.938v4.112zm9.947-4.196c-.613 0-1.065.193-1.332.294v-2.224h-1.01v2.232l.009 3.894H55.5v-.277c.25.118.613.36 1.332.36 1.099 0 1.753-.863 1.753-2.139 0-1.276-.654-2.14-1.753-2.14zm-.226 3.357c-.493 0-.823-.118-1.098-.185v-2.081c.283-.076.605-.184 1.098-.184.703 0 .97.478.97 1.233 0 .755-.284 1.217-.97 1.217zm3.391-3.869l.711-.747-.71-.755-.703.755.702.747zm-.5 4.708h1.01V69.79h-1.01v4.112zm4.037.084c.315 0 .654-.034.84-.067v-.949a4.604 4.604 0 01-.638.042c-.517 0-.76-.084-.76-.587v-1.77h1.277v-.865h-1.276v-1.133h-1.002v1.133h-.726v.864h.726v2.014c0 .974.541 1.318 1.56 1.318zm2.172-4.792l.71-.747-.71-.755-.703.755.703.747zm-.5 4.708h1.009V69.79h-1.01v4.112zm4.004.084c1.364 0 2.09-.747 2.09-2.14 0-1.418-.726-2.14-2.09-2.14-1.356 0-2.092.722-2.092 2.14 0 1.393.736 2.14 2.092 2.14zm0-.915c-.783 0-1.05-.428-1.05-1.233 0-.831.267-1.234 1.05-1.234s1.057.403 1.057 1.234c0 .805-.274 1.233-1.057 1.233zm2.947.831h1.009v-3.08c.34-.1.75-.201 1.155-.201.339 0 .67.15.67.68v2.601H76V71.25c0-1.09-.614-1.544-1.291-1.544-.8 0-1.268.219-1.616.37v-.286h-.936v4.112z"
        fill="#fff"></path>
    </svg>
  </a>
</nav>
<div class="d-flex flex-column bd-highlight mb-3 justify-content-center align-items-center flex-grow-1"
  style="padding: 200px 0 0 0 ">
  <h3>Login</h3>

  <form action="LoginForm.php" method="post">
    <label for="cnpj">CNPJ</label><br>
    <input type="text" name="cnpj" class="form-control"><br>

    <label for="senha">Senha</label><br>
    <input type="password" name="senha" class="form-control"><br>
    <div class="d-flex justify-content-between">
      <button type="submit" class="btn btn-danger">Logar</button>
      <a href="RegistrarForm.php" class="btn btn-secondary"> Cadastrar-se </a>
    </div>



  </form>
</div>
<?php
include "./rodape.unlogged.inc.php";
?>